service: noma-whitelist-triggers

custom:
  USER_POOL_NAME: ${cf:noma-whitelist-cognito-${self:provider.stage}.UserPoolName}
  REGION: ${env:REGION, 'eu-central-1'}

provider:
  name: aws
  region: ${self:custom.REGION}
  runtime: nodejs14.x
  lambdaHashingVersion: "20201221"

functions:
  createAuthChallenge:
    handler: createAuthChallenge.handler
    events:
      - cognitoUserPool:
          pool: ${self:custom.USER_POOL_NAME}
          trigger: CreateAuthChallenge
          existing: true
  defineAuthChallenge:
    handler: defineAuthChallenge.handler
    events:
      - cognitoUserPool:
          pool: ${self:custom.USER_POOL_NAME}
          trigger: DefineAuthChallenge
          existing: true
  preSignUp:
    handler: preSignUp.handler
    events:
      - cognitoUserPool:
          pool: ${self:custom.USER_POOL_NAME}
          trigger: PreSignUp
          existing: true
  verifyAuthChallenge:
    handler: verifyAuthChallenge.handler
    events:
      - cognitoUserPool:
          pool: ${self:custom.USER_POOL_NAME}
          trigger: VerifyAuthChallengeResponse
          existing: true
